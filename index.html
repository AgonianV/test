<!DOCTYPE html>
<html>
<head>
    <title>Mini App</title>
    <meta charset="utf-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial; text-align: center; padding: 20px; }
        button { padding: 10px 20px; font-size: 16px; margin: 10px; }
    </style>
</head>
<body>
    <h2>–ú–æ–π Mini App</h2>
    <p>–¢–≤–æ–π –Ω–∏–∫: <b id="username">...</b></p>

    <button onclick="sendLike()">‚ù§Ô∏è –õ–∞–π–∫–∏—á</button>
    <button onclick="buyProduct()">üõí –ö—É–ø–∏—Ç—ã—á (100‚ÇΩ)</button>
    <button onclick="closeApp()">‚ùå –ó–∞–∫—Ä—ã—Ç—ã—á</button>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        document.getElementById('username').innerText =
            tg.initDataUnsafe.user?.username || '–ì–æ—Å—Ç—å';

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–∞–π–∫–∞
        function sendLike() {
            tg.sendData(JSON.stringify({
                action: 'like',
                user_id: tg.initDataUnsafe.user?.id,
                time: new Date().toISOString()
            }));
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫—É–ø–∫–∏
        function buyProduct() {
            tg.sendData(JSON.stringify({
                action: 'buy',
                product: '–¢–æ–≤–∞—Ä X',
                price: 100,
                user_id: tg.initDataUnsafe.user?.id,
                currency: 'RUB'
            }));
        }

        // –ó–∞–∫—Ä—ã—Ç—å –º–∏–Ω–∏-–∞–ø–ø
        function closeApp() {
            tg.close();
        }
    </script>
</body>
</html>